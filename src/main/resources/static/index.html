<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>실시간 자동차 경주</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
<div id="authBar">
    <div id="loggedOutView">
        <button id="btnShowLogin">로그인</button>
        <button id="btnShowRegister">회원가입</button>
    </div>

    <div id="loggedInView" style="display: none;">
        <span id="carCountDisplay" title="보유 차량 수">🚘 0</span>
        <span id="userDisplay">User</span>
        <button id="btnCharge" title="지갑 열기 / 충전">💰 충전</button>
        <button id="btnRegisterCar" style="background: #FF4136; border-color: #c0392b;">✏️️ 참가 신청</button>

       <button id="btnLogout">로그아웃</button>
    </div>
</div>

<div id="loginModal" class="modal-overlay" style="display: none;">
    <div class="modal-content auth-modal">
        <h2>LOGIN</h2>
        <input type="text" id="loginUsername" placeholder="아이디" class="sketch-input">
        <input type="password" id="loginPassword" placeholder="비밀번호" class="sketch-input">
        <div class="modal-actions">
            <button id="btnLoginAction">로그인</button>
            <button class="btn-close-modal">닫기</button>
        </div>
        <p class="switch-auth">계정이 없나요? <a href="#" id="linkToRegister">회원가입</a></p>
    </div>
</div>

<div id="registerModal" class="modal-overlay" style="display: none;">
    <div class="modal-content auth-modal">
        <h2>JOIN US</h2>
        <input type="text" id="regUsername" placeholder="아이디" class="sketch-input">
        <input type="password" id="regPassword" placeholder="비밀번호" class="sketch-input">
        <div class="modal-actions">
            <button id="btnRegisterAction">회원가입</button>
            <button class="btn-close-modal">닫기</button>
        </div>
        <p class="switch-auth">이미 계정이 있나요? <a href="#" id="linkToLogin">로그인</a></p>
    </div>
</div>
<div id="legend">
    <h2 id="roundCounter">남은 라운드: -</h2>
    <h4> 20%의 확률로 차량 고장 (전진 실패) </h4>
    <h3>Node Types</h3>
    <ul id="legend-list">
    </ul>
</div>
<div id="raceStatusBoard">

    <div id="prizeSection">
        <h3>💰 TOTAL PRIZE</h3>
        <div id="totalPrizeDisplay">0 ₩</div>
    </div>

    <div id="winnerSection" style="display: none;">
        <h3>🏆 WINNERS</h3>
        <ul id="boardWinnerList">
        </ul>
    </div>
</div>
<h1> REAL-TIME RACING (v3.0) </h1>

<div class="controls">
    <button id="startButton" disabled>서버 연결 중...</button>
    <button id="resetButton">트랙 초기화</button>
</div>

<div id="canvasContainer">
    <canvas id="raceCanvas" width="1000" height="500"></canvas>
</div>
<div id="resultModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <h2>🏆 CONGRATULATIONS! 🏆</h2>
        <div id="modalWinnerList"></div>
        <button id="closeModalBtn">닫기</button>
    </div>
</div>
<script src="app.js"></script>
</body>
</html>