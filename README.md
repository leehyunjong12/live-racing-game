# 🚀 실시간 자동차 경주

3주차 자동차 경주 미션을 Spring Boot, WebSocket 기반의 '실시간 그래프 기반 웹 애플리케이션'으로 확장하는 프로젝트

v1.0에서 '실시간 1D 플랫폼'을 구축

v2.0에서는 '그래프(Graph)' 기반의 복잡한 맵 로직과 '동적 맵 전송' 아키텍처를 구현

---

### 🛠️ 기술 스택

* **Backend:** Java 21, Spring Boot, WebSocket, JSON 라이브러리
* **Frontend:** HTML5 'canvas', CSS, JavaScript
* **Build:** Gradle

---

### ✅ v1.0: 1D 실시간 플랫폼 (구현 완료)

> (v1.0은 1차원 `div` 이동 방식으로, v2.0부터는 `canvas` 기반으로 재구축되었습니다.)

**Backend (Java / Spring Boot)**
- [x] Spring Boot 기반의 웹 서버 실행
- [x] WebSocket 엔드포인트 활성화
- [x] 클라이언트 접속 시 WebSocket 세션 연결 및 관리
- [x] 클라이언트가 보낸 `START` 메시지 수신 및 처리
- [x] 자동차들 random 값에 의한 경주 기능 구현
- [x] 경주 상태를 JSON 문자열로 변환
- [x] 우승자 추출 및 JSON 문자열로 반환
- [x] 경주가 진행되는 동안, 연결된 모든 클라이언트에게 0.5초마다 JSON 데이터 **실시간 방송(Broadcast)**

**Frontend (HTML / JS)**
- [x] 경기장 뼈대 및 CSS 스타일링
- [x] WebSocket 클라이언트로 서버 엔드포인트 접속
- [x] WebSocket 연결 성공 시 '경주 시작' 버튼 활성화
- [x] '경주 시작' 버튼 클릭 시, 서버로 `START` 메시지 전송
- [x] 서버로부터 실시간(0.5초)으로 방송되는 JSON 데이터 수신
- [x] 수신한 데이터를 기반으로 실시간 애니메이션 구현
- [x] 트랙 초기화 버튼 구현

---
### ✅ v2.0: 그래프(Graph) 맵 및 아키텍처 리팩토링 (구현 완료)

v1의 한계를 극복하기 위해 v2.0에서는 아키텍처를 재설계하고 그래프(Graph) 기반의 맵을 도입

**Backend (Java / Spring Boot)**
- [x] 그래프 맵 기능 구현 (갈림길)
- [x] 특수 칸 기능 구현(지름길,장애물,후진)
- [x] 맵 전송을 위한 DTO(Data Transfer Object) 설계
- [x] 클라이언트 접속 시 맵 레이아웃(좌표, 선)을 JSON으로 즉시 전송
- [x] '게임 규칙 엔진'이 '그래프' 기반의 다음 위치를 계산하도록 구현
- [x] 한 차라도 결승선에 도착하면 중단하고 우승자 반환 

**Frontend (HTML / JS)**
- [x] 렌더링 엔진을  `HTML <canvas>` 기반으로 전면 교체
- [x] 서버로부터  JSON을 동적으로 다운로드하여 맵을 생성
- [x] `requestAnimationFrame`을 이용한 1초 60프레임 게임 루프 도입
- [x] 서버에서 받은 '노드 번호'를 맵 좌표의 값으로 변환하여 캔버스에 렌더링
- [x] 캔버스에 '연결 선'과 '노드'를 그려 '그래프 맵'  시각화
- [x] 맵 데이터가 수신되어야 '경주 시작' 버튼 활성화로 변경

---


### ✅ v2.0 수정사항: 몇몇 에러 처리 및 수정 (현재)

**Backend (Java / Spring Boot)**
- [x] 지름길 노드는 노드 연결 방식으로 충분히 구현 가능 -> 삭제
- [x] 모든 노드가 '다음 노드' 목록을 갖도록 '맵 데이터' 구조 변경
  - 현재 순차적인 방법은 노드 재배치 불가
- [ ] 노드 구조 더 다양하게 배치
- [ ] 노드 타입 '한턴 쉬기', '뒤로 두칸' 무한 루프 발생 해결
  - '한턴 쉬기'는 기능적으로 해결
  - '뒤로 두칸'은 노드 배치로 해결
- [ ] 노드 타입 "시작 노드로 복귀" 와 "중간 숫자 지점 노드들로 이동" 추가

**Frontend (HTML / JS)**
- [ ] 노드 별로 색상 부여
- [ ] 노드 타입들 보여주기

--- 


### 📅 v2.1: 계획 (예정)

- [ ] **A. '가장 빠른 자동차(follow 자동차)' 추가 (DFS/BFS)**
  - [ ] v2에서 구현된 '게임 규칙 엔진'의 맵 데이터를 기반으로, '최단 경로'를 탐색하는 `DFS/BFS` 알고리즘 구현.

---
